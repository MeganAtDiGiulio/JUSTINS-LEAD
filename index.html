<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Redirect Logic</title>
   <script>
      // Function to set a cookie 
      function setCookie(name, value, days) { 
         const date = new Date();
         date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
         const expires = "expires=" + date.toUTCString();
         document.cookie = name + "=" + value + ";" + expires + ";path=/";
      }
      
      // Function to get a cookie by name
      function getCookie(name) {
         const decodedCookie = decodeURIComponent(document.cookie);
         const cookies = decodedCookie.split(';');
         for (let i = 0; i < cookies.length; i++) {
            let c = cookies[i].trim();
            if (c.indexOf(name + "=") === 0) {
               return c.substring(name.length + 1);
            }
         }
         return "";
      }
      // Function to handle redirection logic
      function redirectUser() {
         const urlParams = new URLSearchParams(window.location.search);
         const isReset = urlParams.get('reset') === 'true';
         // Define the cookie name
         const firstVisitCookie = "firstVisitorSet";
         
         if (isReset) {
            // Reset logic: Clear the cookie and redirect to the first page
            setCookie(firstVisitCookie, "", -1); // Delete the cookie
            window.location.href = '/first-page.html';
         } else if (!getCookie(firstVisitCookie)) {
            // First visitor: Set the cookie and redirect to the first page
            setCookie(firstVisitCookie, "true", 7); // Cookie valid for 7 days
            window.location.href = '/first-page.html';
         } else {
            // Subsequent visitors: Redirect to the second page
            window.location.href = '/second-page.html';
         }
      }
      
      // Execute the function immediately
      redirectUser();
   </script>
</head>
<body>
   <noscript>
      <p>This application requires JavaScript to function properly. Please enable JavaScript in your browser.</p>
   </noscript>
</body>
</html>
